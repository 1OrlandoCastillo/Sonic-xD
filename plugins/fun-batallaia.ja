
const handler = async (m, { conn}) => {
    const inteligencias = [
        { nombre: "🤖 AlphaBot", ventaja: "Aprendizaje automático adaptativo."},
        { nombre: "🧠 NeuroAI", ventaja: "Redes neuronales avanzadas para estrategias óptimas."},
        { nombre: "⚡ QuantumCode", ventaja: "Procesamiento cuántico ultra rápido."},
        { nombre: "🔮 VisionaryAI", ventaja: "Predicciones basadas en datos históricos."},
        { nombre: "🛡️ SentinelCore", ventaja: "Defensa cibernética impenetrable."},
        { nombre: "🚀 HyperLogic", ventaja: "Cálculo lógico instantáneo en decisiones críticas."}
    ];

    let mensaje = `🤖 *Batalla de Inteligencias Artificiales* 🤖\n\n📌 **Elige tu IA para competir:**\n`;

    inteligencias.forEach((ia, i) => {
        mensaje += `🔹 ${i + 1}. ${ia.nombre} - ${ia.ventaja}\n`;
});

    mensaje += "\n📌 *Responde con el número de la opción que elijas.*";

    conn.aiBattleGame = conn.aiBattleGame || {};
    conn.aiBattleGame[m.chat] = { jugadores: {}};

    await conn.sendMessage(m.chat, { text: mensaje});
};

handler.before = async (m, { conn}) => {
    if (conn.aiBattleGame && conn.aiBattleGame[m.chat]) {
        const eleccion = parseInt(m.text.trim());
        const inteligencias = [
            "🤖 AlphaBot", "🧠 NeuroAI", "⚡ QuantumCode", "🔮 VisionaryAI",
            "🛡️ SentinelCore", "🚀 HyperLogic"
        ];

        if (eleccion>= 1 && eleccion <= inteligencias.length) {
            const iaSeleccionada = inteligencias[eleccion - 1];
            const usuario = conn.getName(m.sender);
            conn.aiBattleGame[m.chat].jugadores[m.sender] = { nombre: usuario, ia: iaSeleccionada};

            await conn.reply(m.chat, `✅ *${usuario} ha elegido:* ${iaSeleccionada}\n⌛ Esperando más jugadores...`, m);

            setTimeout(() => {
                if (Object.keys(conn.aiBattleGame[m.chat].jugadores).length> 1) {
                    const participantes = Object.values(conn.aiBattleGame[m.chat].jugadores);
                    const ganador = participantes[Math.floor(Math.random() * participantes.length)];

                    let mensajeBatalla = "🤖 *La batalla de IA comienza...*\n\n";
                    participantes.forEach(({ nombre, ia}) => {
                        mensajeBatalla += `👤 ${nombre}: ${ia}\n`;
});

                    mensajeBatalla += `\n🎉 *El ganador es:* ${ganador.nombre} con ${ganador.ia} 🏆`;

                    conn.sendMessage(m.chat, { text: mensajeBatalla});
} else {
                    conn.sendMessage(m.chat, { text: "❌ *No hubo suficientes jugadores para iniciar la batalla.*"});
}

                delete conn.aiBattleGame[m.chat];
}, 10000);
} else {
            await conn.reply(m.chat, "❌ *Opción inválida. Elige un número entre 1 y 6.*", m);
}
}
};

handler.command = ["batalla"];
export default handler;